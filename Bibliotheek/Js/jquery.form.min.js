/*!
 * jQuery Form Plugin
 * version: 2.93 (30-NOV-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */
(function(n){function t(){if(n.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}n.fn.ajaxSubmit=function(i){function nt(t){for(var e,o,f=new FormData,u=0;u<t.length;u++)t[u].type!="file"&&f.append(t[u].name,t[u].value);if(r.find("input:file:enabled").each(function(){var i=n(this).attr("name"),r=this.files,t;if(i)for(t=0;t<r.length;t++)f.append(i,r[t])}),i.extraData)for(e in i.extraData)f.append(e,i.extraData[e]);i.data=null;o=i.beforeSend;i.beforeSend=function(n,t){t.data=f;n.upload&&(n.upload.onprogress=function(n){t.progress(n.position,n.total)});o&&o.call(t,n,t)};n.ajax(i)}function g(u){function ut(n){return n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document}function ft(){function a(){try{var n=ut(l).readyState;t("state = "+n);n.toLowerCase()=="uninitialized"&&setTimeout(a,50)}catch(i){t("Server abort: ",i," (",i.name,")");p(g);k&&clearTimeout(k);k=undefined}}var e=r.attr("target"),o=r.attr("action"),i,u;h.setAttribute("target",b);s||h.setAttribute("method","POST");o!=f.url&&h.setAttribute("action",f.url);f.skipEncodingOverride||s&&!/post/i.test(s)||r.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});f.timeout&&(k=setTimeout(function(){nt=!0;p(tt)},f.timeout));i=[];try{if(f.extraData)for(u in f.extraData)i.push(n('<input type="hidden" name="'+u+'">').attr("value",f.extraData[u]).appendTo(h)[0]);f.iframeTarget||(c.appendTo("body"),l.attachEvent?l.attachEvent("onload",p):l.addEventListener("load",p,!1));setTimeout(a,15);h.submit()}finally{h.setAttribute("action",o);e?h.setAttribute("target",e):r.removeAttr("target");n(i).remove()}}function p(i){var r,u,w,s,b,d,h,a,y;if(!e.aborted&&!st){try{o=ut(l)}catch(it){t("cannot access response document: ",it);i=g}if(i===tt&&e){e.abort("timeout");return}if(i==g&&e){e.abort("server abort");return}if(o&&o.location.href!=f.iframeSrc||nt){l.detachEvent?l.detachEvent("onload",p):l.removeEventListener("load",p,!1);r="success";try{if(nt)throw"timeout";if(w=f.dataType=="xml"||o.XMLDocument||n.isXMLDoc(o),t("isXml="+w),!w&&window.opera&&(o.body==null||o.body.innerHTML=="")&&--ot){t("requeing onLoad callback, DOM not available");setTimeout(p,250);return}s=o.body?o.body:o.documentElement;e.responseText=s?s.innerHTML:null;e.responseXML=o.XMLDocument?o.XMLDocument:o;w&&(f.dataType="xml");e.getResponseHeader=function(n){var t={"content-type":f.dataType};return t[n]};s&&(e.status=Number(s.getAttribute("status"))||e.status,e.statusText=s.getAttribute("statusText")||e.statusText);b=(f.dataType||"").toLowerCase();d=/(json|script|text)/.test(b);d||f.textarea?(h=o.getElementsByTagName("textarea")[0],h?(e.responseText=h.value,e.status=Number(h.getAttribute("status"))||e.status,e.statusText=h.getAttribute("statusText")||e.statusText):d&&(a=o.getElementsByTagName("pre")[0],y=o.getElementsByTagName("body")[0],a?e.responseText=a.textContent?a.textContent:a.innerText:y&&(e.responseText=y.textContent?y.textContent:y.innerText))):b!="xml"||e.responseXML||e.responseText==null||(e.responseXML=ct(e.responseText));try{et=at(e,b,f)}catch(i){r="parsererror";e.error=u=i||r}}catch(i){t("error caught: ",i);r="error";e.error=u=i||r}e.aborted&&(t("upload aborted"),r=null);e.status&&(r=e.status>=200&&e.status<300||e.status===304?"success":"error");r==="success"?(f.success&&f.success.call(f.context,et,"success",e),v&&n.event.trigger("ajaxSuccess",[e,f])):r&&(u==undefined&&(u=e.statusText),f.error&&f.error.call(f.context,e,r,u),v&&n.event.trigger("ajaxError",[e,f,u]));v&&n.event.trigger("ajaxComplete",[e,f]);v&&!--n.active&&n.event.trigger("ajaxStop");f.complete&&f.complete.call(f.context,e,r);st=!0;f.timeout&&clearTimeout(k);setTimeout(function(){f.iframeTarget||c.remove();e.responseXML=null},100)}}}var h=r[0],d,a,f,v,b,c,l,e,w,y,nt,k,ht=!!n.fn.prop,tt,g,it,rt,et,o,ot,st;if(u)if(ht)for(a=0;a<u.length;a++)d=n(h[u[a].name]),d.prop("disabled",!1);else for(a=0;a<u.length;a++)d=n(h[u[a].name]),d.removeAttr("disabled");if(n(":input[name=submit],:input[id=submit]",h).length){alert('Error: Form elements must not have name or id of "submit".');return}if(f=n.extend(!0,{},n.ajaxSettings,i),f.context=f.context||f,b="jqFormIO"+(new Date).getTime(),f.iframeTarget?(c=n(f.iframeTarget),y=c.attr("name"),y==null?c.attr("name",b):b=y):(c=n('<iframe name="'+b+'" src="'+f.iframeSrc+'" />'),c.css({position:"absolute",top:"-1000px",left:"-1000px"})),l=c[0],e={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var r=i==="timeout"?"timeout":"aborted";t("aborting upload... "+r);this.aborted=1;c.attr("src",f.iframeSrc);e.error=r;f.error&&f.error.call(f.context,e,r,i);v&&n.event.trigger("ajaxError",[e,f,r]);f.complete&&f.complete.call(f.context,e,r)}},v=f.global,v&&!n.active++&&n.event.trigger("ajaxStart"),v&&n.event.trigger("ajaxSend",[e,f]),f.beforeSend&&f.beforeSend.call(f.context,e,f)===!1){f.global&&n.active--;return}if(!e.aborted){w=h.clk;w&&(y=w.name,y&&!w.disabled&&(f.extraData=f.extraData||{},f.extraData[y]=w.value,w.type=="image"&&(f.extraData[y+".x"]=h.clk_x,f.extraData[y+".y"]=h.clk_y)));tt=1;g=2;it=n("meta[name=csrf-token]").attr("content");rt=n("meta[name=csrf-param]").attr("content");rt&&it&&(f.extraData=f.extraData||{},f.extraData[rt]=it);f.forceSync?ft():setTimeout(ft,10);ot=50;var ct=n.parseXML||function(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},lt=n.parseJSON||function(s){return window.eval("("+s+")")},at=function(t,i,r){var f=t.getResponseHeader("content-type")||"",e=i==="xml"||!i&&f.indexOf("xml")>=0,u=e?t.responseXML:t.responseText;return e&&u.documentElement.nodeName==="parsererror"&&n.error&&n.error("parsererror"),r&&r.dataFilter&&(u=r.dataFilter(u,i)),typeof u=="string"&&(i==="json"||!i&&f.indexOf("json")>=0?u=lt(u):(i==="script"||!i&&f.indexOf("javascript")>=0)&&n.globalEval(u)),u}}}var s,a,u,r,h,c,l,f,o,e,p,d;if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;if(r=this,typeof i=="function"&&(i={success:i}),s=this.attr("method"),a=this.attr("action"),u=typeof a=="string"?n.trim(a):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),i=n.extend(!0,{url:u,success:n.ajaxSettings.success,type:s||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i),h={},this.trigger("form-pre-serialize",[this,i,h]),h.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&i.beforeSerialize(this,i)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(c=i.traditional,c===undefined&&(c=n.ajaxSettings.traditional),f=this.formToArray(i.semantic),i.data&&(i.extraData=i.data,l=n.param(i.data,c)),i.beforeSubmit&&i.beforeSubmit(f,this,i)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[f,this,i,h]),h.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;o=n.param(f,c);l&&(o=o?o+"&"+l:l);i.type.toUpperCase()=="GET"?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+o,i.data=null):i.data=o;e=[];i.resetForm&&e.push(function(){r.resetForm()});i.clearForm&&e.push(function(){r.clearForm(i.includeHidden)});!i.dataType&&i.target?(p=i.success||function(){},e.push(function(t){var r=i.replaceTarget?"replaceWith":"html";n(i.target)[r](t).each(p,arguments)})):i.success&&e.push(i.success);i.success=function(n,t,u){for(var o=i.context||i,f=0,s=e.length;f<s;f++)e[f].apply(o,[n,t,u||r,r])};var w=n("input:file:enabled[value]",this),v=w.length>0,b="multipart/form-data",k=r.attr("enctype")==b||r.attr("encoding")==b,y=!!(v&&w.get(0).files&&window.FormData);return t("fileAPI :"+y),d=(v||k)&&!y,i.iframe!==!1&&(i.iframe||d)?i.closeKeepAlive?n.get(i.closeKeepAlive,function(){g(f)}):g(f):(v||k)&&y?(i.progress=i.progress||n.noop,nt(f)):n.ajax(i),this.trigger("form-submit-notify",[this,i]),this};n.fn.ajaxForm=function(i){if(this.length===0){var r={s:this.selector,c:this.context};return!n.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),n(function(){n(r.s,r.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),n(this).ajaxSubmit(i))}).bind("click.form-plugin",function(t){var r=t.target,u=n(r),f,i,e;if(!u.is(":submit,input:image")){if(f=u.closest(":submit"),f.length==0)return;r=f[0]}i=this;i.clk=r;r.type=="image"&&(t.offsetX!=undefined?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):typeof n.fn.offset=="function"?(e=u.offset(),i.clk_x=t.pageX-e.left,i.clk_y=t.pageY-e.top):(i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop));setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)})};n.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};n.fn.formToArray=function(t){var f=[],r,o,s,h,i,e,u,a,v,l,c;if(this.length===0||(r=this[0],o=t?r.getElementsByTagName("*"):r.elements,!o))return f;for(s=0,a=o.length;s<a;s++)if(u=o[s],i=u.name,i){if(t&&r.clk&&u.type=="image"){u.disabled||r.clk!=u||(f.push({name:i,value:n(u).val(),type:u.type}),f.push({name:i+".x",value:r.clk_x},{name:i+".y",value:r.clk_y}));continue}if(e=n.fieldValue(u,!0),e&&e.constructor==Array)for(h=0,v=e.length;h<v;h++)f.push({name:i,value:e[h]});else e!==null&&typeof e!="undefined"&&f.push({name:i,value:e,type:u.type})}return!t&&r.clk&&(l=n(r.clk),c=l[0],i=c.name,i&&!c.disabled&&c.type=="image"&&(f.push({name:i,value:l.val()}),f.push({name:i+".x",value:r.clk_x},{name:i+".y",value:r.clk_y}))),f};n.fn.formSerialize=function(t){return n.param(this.formToArray(t))};n.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var f=this.name,r,u,e;if(f)if(r=n.fieldValue(this,t),r&&r.constructor==Array)for(u=0,e=r.length;u<e;u++)i.push({name:f,value:r[u]});else r!==null&&typeof r!="undefined"&&i.push({name:this.name,value:r})}),n.param(i)};n.fn.fieldValue=function(t){for(var f,i,r=[],u=0,e=this.length;u<e;u++)(f=this[u],i=n.fieldValue(f,t),i!==null&&typeof i!="undefined"&&(i.constructor!=Array||i.length))&&(i.constructor==Array?n.merge(r,i):r.push(i));return r};n.fieldValue=function(t,i){var a=t.name,u=t.type,h=t.tagName.toLowerCase(),e,o,r,f;if(i===undefined&&(i=!0),i&&(!a||t.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!t.checked||(u=="submit"||u=="image")&&t.form&&t.form.clk!=t||h=="select"&&t.selectedIndex==-1))return null;if(h=="select"){if(e=t.selectedIndex,e<0)return null;var c=[],l=t.options,s=u=="select-one",v=s?e+1:l.length;for(o=s?e:0;o<v;o++)if(r=l[o],r.selected){if(f=r.value,f||(f=r.attributes&&r.attributes.value&&!r.attributes.value.specified?r.text:r.value),s)return f;c.push(f)}return c}return n(t).val()};n.fn.clearForm=function(t){return this.each(function(){n("input,select,textarea",this).clearFields(t)})};n.fn.clearFields=n.fn.clearInputs=function(n){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,r=this.tagName.toLowerCase();t.test(i)||r=="textarea"||n&&/hidden/.test(i)?this.value="":i=="checkbox"||i=="radio"?this.checked=!1:r=="select"&&(this.selectedIndex=-1)})};n.fn.resetForm=function(){return this.each(function(){typeof this.reset!="function"&&(typeof this.reset!="object"||this.reset.nodeType)||this.reset()})};n.fn.enable=function(n){return n===undefined&&(n=!0),this.each(function(){this.disabled=!n})};n.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var r=this.type,i;r=="checkbox"||r=="radio"?this.checked=t:this.tagName.toLowerCase()=="option"&&(i=n(this).parent("select"),t&&i[0]&&i[0].type=="select-one"&&i.find("option").selected(!1),this.selected=t)})};n.fn.ajaxSubmit.debug=!1})(jQuery);
/*
//# sourceMappingURL=jquery.form.min.js.map
*/